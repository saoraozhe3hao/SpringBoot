<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xianqingzao.yequxiaoquan.dao.UserDao">    <!-- SQL操作接口 -->

    <select id="getUserByName" parameterType="String" resultType="User">
        select * from user where username=#{username}
    </select>
    <!-- 用等值连接实现 无悬浮组的一对一查询 -->
    <select id="getRolesByUserId" parameterType="String" resultType="Role">
        select role.id,role.name as id,name from role,user_role where user_role.userId=#{userId} and user_role.roleId=role.id
    </select>
    <select id="getAuthoritiesByRoles" parameterType="List" resultType="String">
        select distinct authority.name from authority,role_authority where authority.id=role_authority.authorityId
        and role_authority.roleId in
        <foreach item="role" index="index" collection="list" open="(" separator="," close=")">
            #{role.id}
        </foreach>
    </select>
</mapper>